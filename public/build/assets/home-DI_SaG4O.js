import{U as y,m as H,j as e,K as U,g as T,r as O,V as C,L as B,A as M}from"./app-DkEmKj5d.js";import{I as v}from"./input-error-BG6kX_4y.js";import{B as w,c as q,S as P,a as J}from"./button-8So2Tsvw.js";import{D as K,a as $,b as W}from"./dialog-DemSr6-q.js";import{L as S,I as F}from"./label-CyYSS63R.js";import{L as R}from"./loader-circle-CvgfNeZ7.js";import{P as G}from"./pagination-GDtv0HFO.js";import{c as V}from"./createLucideIcon-D45xEDYF.js";/* empty css            */import"./index-CnPAP0P9.js";import"./index-BkOABFbW.js";import"./index-B5D2WSFb.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],z=V("Flame",Y),D=t=>{let r;const s=new Set,n=(c,h)=>{const x=typeof c=="function"?c(r):c;if(!Object.is(x,r)){const p=r;r=h??(typeof x!="object"||x===null)?x:Object.assign({},r,x),s.forEach(f=>f(r,p))}},i=()=>r,o={setState:n,getState:i,getInitialState:()=>g,subscribe:c=>(s.add(c),()=>s.delete(c))},g=r=t(n,i,o);return o},X=t=>t?D(t):D,Z=t=>t;function Q(t,r=Z){const s=y.useSyncExternalStore(t.subscribe,()=>r(t.getState()),()=>r(t.getInitialState()));return y.useDebugValue(s),s}const _=t=>{const r=X(t),s=n=>Q(r,n);return Object.assign(s,r),s},ee=t=>t?_(t):_;function te(t,r){let s;try{s=t()}catch{return}return{getItem:i=>{var a;const d=g=>g===null?null:JSON.parse(g,void 0),o=(a=s.getItem(i))!=null?a:null;return o instanceof Promise?o.then(d):d(o)},setItem:(i,a)=>s.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>s.removeItem(i)}}const k=t=>r=>{try{const s=t(r);return s instanceof Promise?s:{then(n){return k(n)(s)},catch(n){return this}}}catch(s){return{then(n){return this},catch(n){return k(n)(s)}}}},se=(t,r)=>(s,n,i)=>{let a={storage:te(()=>localStorage),partialize:l=>l,version:0,merge:(l,b)=>({...b,...l}),...r},d=!1;const o=new Set,g=new Set;let c=a.storage;if(!c)return t((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),s(...l)},n,i);const h=()=>{const l=a.partialize({...n()});return c.setItem(a.name,{state:l,version:a.version})},x=i.setState;i.setState=(l,b)=>{x(l,b),h()};const p=t((...l)=>{s(...l),h()},n,i);i.getInitialState=()=>p;let f;const E=()=>{var l,b;if(!c)return;d=!1,o.forEach(m=>{var u;return m((u=n())!=null?u:p)});const j=((b=a.onRehydrateStorage)==null?void 0:b.call(a,(l=n())!=null?l:p))||void 0;return k(c.getItem.bind(c))(a.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==a.version){if(a.migrate){const u=a.migrate(m.state,m.version);return u instanceof Promise?u.then(N=>[!0,N]):[!0,u]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var u;const[N,A]=m;if(f=a.merge(A,(u=n())!=null?u:p),s(f,!0),N)return h()}).then(()=>{j==null||j(f,void 0),f=n(),d=!0,g.forEach(m=>m(f))}).catch(m=>{j==null||j(void 0,m)})};return i.persist={setOptions:l=>{a={...a,...l},l.storage&&(c=l.storage)},clearStorage:()=>{c==null||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>E(),hasHydrated:()=>d,onHydrate:l=>(o.add(l),()=>{o.delete(l)}),onFinishHydration:l=>(g.add(l),()=>{g.delete(l)})},a.skipHydration||E(),f||p},ae=se,I=ee()(ae(t=>({user:null,setUser:r=>t({user:r}),clearUser:()=>t({user:null})}),{name:"user-storage"})),ne=()=>{const{user:t}=I(),[r,s]=y.useState(!1),{data:n,setData:i,post:a,processing:d,errors:o,reset:g,clearErrors:c}=H({message:"",email:(t==null?void 0:t.email)??"",name:(t==null?void 0:t.name)??""}),h=x=>{x.preventDefault(),a(route("queue.store"),{onSuccess:()=>{s(!1),window.location.reload()}}),g(),c()};return e.jsxs(K,{open:r,onOpenChange:s,children:[e.jsx(w,{className:"font-bold bg-black font-open text-white hover:bg-gray",onClick:()=>s(!0),children:"ADD YOUR NAME TO THE QUEUE"}),e.jsxs($,{className:"dark:bg-white dark:text-black",children:[e.jsx(W,{children:"Add your name on queue"}),e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:h,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(S,{htmlFor:"name",children:"Request"})}),e.jsx("textarea",{id:"name",className:"mt-4 block h-30 w-full rounded-md border-gray-300 p-3 shadow-sm sm:text-sm",value:n.message,onChange:x=>i("message",x.target.value),required:!0,tabIndex:1,autoComplete:"current-name",placeholder:"Message"}),o.message&&e.jsx(v,{message:o==null?void 0:o.message}),o.email&&e.jsx(v,{message:o==null?void 0:o.email}),o.name&&e.jsx(v,{message:o==null?void 0:o.name})]}),e.jsxs(w,{type:"submit",className:" hover:bg-gray bg-black text-white mt-4 w-full",tabIndex:4,disabled:d,children:[d&&e.jsx(R,{className:"h-4 w-4 animate-spin"}),"Join"]})]})]})]})},re=()=>{const{user:t,setUser:r}=I(),{data:s,setData:n,processing:i,errors:a}=H({name:"",email:""}),d=o=>{o.preventDefault(),r(s)};return t?null:e.jsx("form",{className:"flex w-1/4 flex-col gap-6",onSubmit:d,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(S,{htmlFor:"name",children:"Name"})}),e.jsx(F,{id:"name",type:"text",required:!0,tabIndex:1,autoComplete:"current-name",value:s.name,onChange:o=>n("name",o.target.value),placeholder:"Name"}),e.jsx(v,{message:a.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"email",children:"Email address"}),e.jsx(F,{id:"email",type:"email",required:!0,autoFocus:!0,tabIndex:2,autoComplete:"email",value:s.email,onChange:o=>n("email",o.target.value),placeholder:"email@example.com"}),e.jsx(v,{message:a.email})]}),e.jsxs(w,{type:"submit",className:"mt-4 w-full bg-black text-white hover:bg-gray-700",tabIndex:4,disabled:i,children:[i&&e.jsx(R,{className:"h-4 w-4 animate-spin"}),"Confirm"]})]})})};function oe({className:t,...r}){return e.jsx("div",{"data-slot":"card",className:q("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}const ie=J("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-auto",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function L({className:t,variant:r,asChild:s=!1,...n}){const i=s?P:"span";return e.jsx(i,{"data-slot":"badge",className:q(ie({variant:r}),t),...n})}const le=({children:t,guestName:r})=>{const n=U().props.settings??{date:"2024-01-01",schedule:"9am - 5pm"};return e.jsx("div",{className:"bg-white text-black",children:e.jsxs("div",{className:"max-w-[1360px] w-full mx-auto",children:[e.jsxs("div",{className:"flex pt-8 justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("img",{src:"/kewlor.jpeg",className:"w-24 rounded-full",alt:"logo"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-[700] font-open",children:"WELCOME TO"}),e.jsx("h1",{className:"text-3xl font-open bg-black text-center text-white font-extrabold",children:"KEWLOR'S"}),e.jsx("h2",{className:"text-2xl font-[700] font-open",children:"TIKTOK LIVE"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xl",children:r&&e.jsxs(e.Fragment,{children:["Hi ",r]})}),e.jsx("h1",{className:"font-bold dont-open text-2xl",children:n.date}),e.jsx("h1",{className:"font-bold font-open text-2xl",children:n.schedule})]})]}),t]})})};function Ne({userQueues:t,currentUserQueueNumber:r=0}){var i;const{user:s}=I();T(2e3,{only:["userQueues","currentUserQueueNumber"],data:{email:s==null?void 0:s.email}});const{flash:n}=U().props;return O.useEffect(()=>{var a;(a=n==null?void 0:n.message)!=null&&a.success&&C.success(n.message.success,{duration:2e3})},[n]),O.useEffect(()=>{var a;(a=n==null?void 0:n.message)!=null&&a.error&&C.error(n.message.error,{duration:2e3})},[n]),e.jsxs(le,{guestName:s==null?void 0:s.name,children:[e.jsxs(B,{title:"Home",children:[e.jsx("link",{rel:"preconnect",href:"https://fonts.bunny.net"}),e.jsx("link",{href:"https://fonts.bunny.net/css?family=instrument-sans:400,500,600",rel:"stylesheet"})]}),e.jsx("div",{className:"flex  flex-col items-center justify-center gap-2 bg-[#FDFDFC]  text-[#1b1b18] ",children:s!=null&&s.name?e.jsxs(e.Fragment,{children:[r>0&&e.jsxs(e.Fragment,{children:["queue number: ",r]}),e.jsx("div",{className:"w-full flex justify-end",children:e.jsx(ne,{})}),e.jsx(M,{data:"userQueues",fallback:e.jsx("div",{className:"h-[800px] w-full block"}),children:e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"my-4 grid w-full gap-4",children:((i=t==null?void 0:t.data)==null?void 0:i.length)>0&&(t==null?void 0:t.data.map((a,d)=>e.jsxs(oe,{className:`

relative
${a.is_boosted&&"bg-violet-500"}
${a.status==="completed"?"bg-green-200":"bg-white"}

 border-0`,children:[a.status==="completed"&&e.jsx("div",{className:"absolute bottom-0 right-0 mr-10 font-extrabold font-open px-4 bg-green-600 text-white   text-red-500",children:"DONE"}),e.jsxs("div",{className:"grid md:grid-cols-3 grid-cols-1 items-center ",children:[e.jsxs("div",{className:"pl-4 flex",children:[e.jsxs(L,{className:"mr-2 bg-black text-white",children:[" #",a.initial_queue_number," "]}),a.is_boosted&&e.jsxs(L,{className:"mr-2 bg-violet-500 text-white",children:[" ",e.jsx(z,{className:"text-orange-300"})," BOOSTED "]}),e.jsx("span",{className:"text-black",children:a.name})]}),a.message&&e.jsxs("div",{className:"pl-4",children:[e.jsx("h3",{className:"mr-2 inline-block text-black mb-0.5 text-base font-medium",children:"Message:"}),e.jsx("p",{className:"inline-block text-muted-foreground text-sm",children:a.message})]}),a.admin_notes&&e.jsxs("div",{className:"pl-4",children:[e.jsx("h3",{className:"inline-block mr-2 text-black mb-0.5 text-base font-medium",children:"Notes"}),e.jsx("p",{className:"inline-block text-muted-foreground text-sm",children:a.admin_notes})]})]})]},d)))}),e.jsx(G,{links:t==null?void 0:t.links})]})})]}):e.jsx(re,{})})]})}export{Ne as default};
